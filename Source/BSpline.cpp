#include <GL/glew.h>
//#include <GL/glut.h>
#include "BSpline.h"
#include "Renderer.h"
#include "SphereModel.h"
#include "World.h"
#include "Animation.h"
#include <stdio.h>
#include <string>
#include <vector>
#include <math.h> 

using namespace std;
using namespace glm;

/*
[BSpline]
name		= "BSpline"
scaling		= 1.0 1.0 1.0
position	= 0.0 3.5 0.0
rotation	= 0.0 0.0 1.0 90*/

bool done = false;
float acceleration = 9.8, velocity = 0, slope, actualSpeed = 10, hSlope, hAngle,
		lastX = 0, lastY = 0, lastZ = 0, totalTime = 0.0000001, dist, temp1, temp2;
/*float cpts[70][3] = {
{-31.642876, 40.071865, -35.836735},
{6.044746, 4.399780, -27.198311},
{25.937206, 1.919136, -25.292637},
{34.456802, 7.312576, -35.487179},
{38.651726, 11.606552, -31.369743},
{35.352654, 9.726160, -23.064976},
{31.124512, 10.258284, -18.072170},
{31.445427, 11.955032, -9.163717},
{28.911690, 8.247074, -5.417727},
{23.272942, 4.883789, -0.770550},
{17.696342, 3.782986, 2.126484},
{13.187225, 3.669548, 2.098961},
{0.375822, 3.580074, 0.840492},
{-6.835022, 3.549484, 0.188881},
{-11.599120, 3.913151, -0.160408},
{-17.186722, 3.102116, 9.898098},
{-12.418702, 3.337070, 22.703632},
{-3.178019, 3.081562, 22.908352},
{2.325541, 4.385551, 20.291355},
{4.399956, 4.852432, 18.713070},
{5.672796, 5.023781, 17.162983},
{11.938641, 4.575390, 1.754059},
{17.587765, 4.906612, -10.002953},
{21.181824, 5.494675, -12.301559},
{19.620667, 5.895767, -13.275372},
{16.741478, 5.093132, -14.425301},
{15.478859, 4.653923, -15.429441},
{14.692242, 4.421104, -16.451767},
{13.905628, 4.188278, -17.474089},
{13.118996, 3.955444, -18.496408},
{11.399994, 3.352638, -19.264523},
{8.691479, 2.598381, -18.845819},
{8.482197, 2.628559, -17.775393},
{8.481327, 2.632244, -16.632097},
{8.480457, 2.635933, -15.488808},
{8.479584, 2.639618, -14.345514},
{8.468826, 2.574459, -13.207100},
{8.430855, 2.303223, -12.083178},
{8.434208, 2.293938, -10.940525},
{8.437328, 2.304173, -9.874458},
{8.438366, 2.328094, -8.907974},
{8.448399, 2.292839, -7.511168},
{8.453144, 2.292377, -6.367373},
{8.457878, 2.291981, -5.224083},
{8.462612, 2.291592, -4.080795},
{8.467342, 2.291206, -2.937508},
{8.472073, 2.290817, -1.794224},
{8.476810, 2.290428, -0.650940},
{8.481544, 2.290031, 0.492355},
{8.486279, 2.289642, 1.635643},
{8.491013, 2.289246, 2.778934},
{8.495750, 2.288857, 3.922222},
{8.500488, 2.288464, 5.065514},
{8.505215, 2.288071, 6.208797},
{8.509953, 2.287682, 7.352085},
{8.514683, 2.287289, 8.495377},
{8.519421, 2.286900, 9.638660},
{8.524155, 2.286507, 10.781948},
{8.528889, 2.286121, 11.925236},
{8.533619, 2.285728, 13.068523},
{8.538357, 2.285336, 14.211815},
{8.543091, 2.284943, 15.355099},
{8.547825, 2.284546, 16.498394},
{8.552563, 2.284157, 17.641678},
{8.557293, 2.283772, 18.784969},
{8.562027, 2.283379, 19.928253},
{8.566761, 2.282990, 21.071545},
{8.571495, 2.282597, 22.214825},
{8.576233, 2.282204, 23.358650},
{8.581760, 2.281750, 24.694256}
};//*/
/*float cpts[92][3] = {
		{ 10, 7, 0.2 },		{ 10, 8, 0.21 },	{ 8, 10, 0.22 },	{ 5, 10, 0.23 },
		{ -5, 10, 5.0 },	{ -8, 10, 5.1 },	{ -10, 8, 5.05 },	{ -10, 7, 1.0 },
		{ -10, 4, 0.5 },	{ -10, 1, 4.0 },	{ -10, -2, 0.2 },	{ -8.5, -4, 4.0 },
		{ -6, -6, 0.1 },	{ -8.5, -8, 4.0 },	{ -10, -6, 2.5 },	{ -8.5, -3, 0.2 },
		{ -9, 1, 3.5 },		{ -6, -0.5, 1.0 },	{ -3, -2, 4.0 },	{ -6, -4, 0.2 },
		{ -8, -2, 0.1 },	{ -8, 1, 4.0 },		{ -8, 4, 0.5 },		{ -8, 7, 0.2 },
		{ -6.5, 8.5, 0.2 },	{ -5, 6, 0.2 },		{ -5.0, 4, 2 },		{ -5, 2, 3.5 },
		{ -5.0, 0, 2.5 },	{ -5, -2, 2.5 },	{ -5.0, -4, 4 },	{ -5, -6, 3.5 },
		{ -5, -8, 5 },		{ -3.5, -9.5, 5 },	{ -2, -8, 5 },		{ -2, -7, 4.5 },
		{ -2, -6, 4.4 },	{ -2, -5, 4 },		{ -2, -4, 3.9 },	{ -2, -3, 3.5 },
		{ -2, -2, 3.4 },	{ -2, -1, 3 },		{ -2, 0, 2.8 },		{ -2, 1, 2.5 },
		{ -2, 2, 2.3 },		{ -2, 3, 2 },		{ -2, 4, 1.9 },		{ -2, 5, 1.6 },
		{ -2, 6, 1.4 },		{ 0, 9, 0.3 },		{ 7, 9, 0.2 },		{ 9, 7, 0.2 },
		{ 9, -7, 0.2 },		{ 7, -9, 0.7 },		{ 5, -9, 5.1 },		{ 4, -8, 5.1 },
		{ 4, -6, 1.1 },		{ 6, -4, 0.2 },		{ 8, -6, 0.2 },		{ 6, -8, 0.2 },
		{ 3, -5, 0.2 },		{ 6, -2, 0.2 },		{ 8, 0, 2.2 },		{ 6.5, 1.5, 0.2 },
		{ 5, 3, 2.2 },		{ 6.5, 4.5, 0.2 },	{ 8, 6, 2.2 },		{ 6.5, 7.5, 0.2 },
		{ 5, 6, 2.2 },		{ 3.5, 4.5, 0.2 },	{ 2, 6, 2.2 },		{ 0.5, 7.5, 0.2 },
		{ -1, 6, 2.2 },		{ 0.5, 4.5, 0.2 },	{ 2, 3, 2.2 },		{ 0.5, 1.5, 0.2 },
		{ -1, 0, 2.2 },		{ 0.5, -1.5, 0.2 },	{ 2, 0, 1.2 },		{ 3.5, 1.5, 2.2 },
		{ 5, 0, 0.3 },		{ 3.5, -1.5, 3.4 },	{ 2, -3, 1.0 },		{ 0.2, -4.5, 3.1 },
		{ -1.6, -7, 4.5 },	{ 8, -10, 0.2 },	{ 10, -8, 0.2 },	{ 10, 0, 0.19 },
		{ 10, 7, 0.2 },		{ 10, 8, 0.21 },	{ 8, 10, 0.22 },	{ 5, 10, 0.23 }
};//*/
float map[1392][3] = {
{-31.642876, 40.071865, -35.836735},{-29.426422, 40.766464, -33.529541},{-27.208694, 40.016296, -31.873581},{-25.001549, 38.169415, -30.734735},
{-22.815422, 35.537201, -29.993158},{-20.659311, 32.394371, -29.543274},{-18.540796, 28.978977, -29.293785},{-16.466022, 25.492395, -29.167664},
{-14.439705, 22.099346, -29.102154},{-12.465137, 18.927872, -29.048779},{-10.544179, 16.069361, -28.973337},{-8.677261, 13.578518, -28.855888},
{-6.863386, 11.473375, -28.690777},{-5.100153, 9.735716, -28.486458},{-3.384314, 8.322678, -28.260500},{-1.712908, 7.189823, -28.029745},
{-0.083496, 6.295944, -27.808247},{1.505840, 5.603096, -27.607279},{3.056492, 5.076553, -27.435310},{4.569344, 4.684860, -27.298023},
{6.044746, 4.399780, -27.198311},{7.482531, 4.196350, -27.136274},{8.882011, 4.052845, -27.109219},{10.241970, 3.950768, -27.111656},
{11.560688, 3.874882, -27.135315},{12.835896, 3.813206, -27.169134},{14.064983, 3.756695, -27.200047},{15.245533, 3.698174, -27.216146},
{16.375599, 3.631794, -27.208065},{17.453709, 3.553059, -27.168987},{18.478874, 3.458813, -27.094669},{19.450562, 3.347240, -26.983421},
{20.368732, 3.217869, -26.836124},{21.233826, 3.071548, -26.656216},{22.046719, 2.910507, -26.449699},{22.808804, 2.738270, -26.225140},
{23.521931, 2.559727, -25.993668},{24.188427, 2.381104, -25.768970},{24.811073, 2.209850, -25.567038},{25.392921, 2.053581, -25.403715},
{25.937206, 1.919136, -25.292637},{26.447258, 1.812572, -25.245077},{26.926552, 1.739109, -25.269936},{27.378693, 1.703140, -25.373745},
{27.807434, 1.708271, -25.560678},{28.216629, 1.757256, -25.832533},{28.610279, 1.852058, -26.188747},{28.992538, 1.993820, -26.626385},
{29.367664, 2.182842, -27.140152},{29.740044, 2.418636, -27.722378},{30.114208, 2.699894, -28.363068},{30.494434, 3.024590, -29.050718},
{30.884193, 3.390167, -29.773735},{31.286022, 3.793552, -30.520666},{31.701542, 4.231190, -31.280201},{32.131458, 4.698997, -32.041180},
{32.575539, 5.192398, -32.792580},{33.032646, 5.706303, -33.523537},{33.500710, 6.235111, -34.223316},{33.976727, 6.772739, -34.881344},
{34.456802, 7.312576, -35.487179},{34.936089, 7.847507, -36.030533},{35.408844, 8.369923, -36.501263},{35.868660, 8.871998, -36.889729},
{36.309544, 9.346630, -37.188011},{36.726173, 9.787834, -37.390335},{37.113995, 10.190722, -37.493103},{37.469131, 10.551510, -37.494881},
{37.788471, 10.867521, -37.396393},{38.069649, 11.137171, -37.200531},{38.310993, 11.359987, -36.912361},{38.511578, 11.536606, -36.539104},
{38.671181, 11.668770, -36.090157},{38.790348, 11.759308, -35.577065},{38.870319, 11.812170, -35.013554},{38.913040, 11.832291, -34.415222},
{38.920811, 11.824795, -33.797371},{38.896019, 11.794416, -33.173428},{38.841164, 11.745420, -32.554848},{38.758839, 11.681671, -31.951115},
{38.651726, 11.606552, -31.369743},{38.522621, 11.523029, -30.816269},{38.374405, 11.433645, -30.294266},{38.210030, 11.340471, -29.805332},
{38.032578, 11.245155, -29.349092},{37.845222, 11.148905, -28.923203},{37.651218, 11.052481, -28.523346},{37.453907, 10.956226, -28.143295},
{37.256496, 10.860210, -27.776005},{37.061722, 10.764441, -27.415180},{36.871769, 10.668945, -27.055531},{36.688354, 10.573719, -26.692745},
{36.512619, 10.478767, -26.323502},{36.345222, 10.384085, -25.945475},{36.186310, 10.289642, -25.557320},{36.035473, 10.195421, -25.158686},
{35.891808, 10.101381, -24.750212},{35.753883, 10.007481, -24.333527},{35.619747, 9.913677, -23.911243},{35.486931, 9.819899, -23.486965},
{35.352654, 9.726160, -23.064976},{35.214306, 9.632717, -22.649384},{35.069725, 9.540180, -22.243835},{34.917057, 9.449451, -21.851536},
{34.754910, 9.361797, -21.475220},{34.582214, 9.278774, -21.117176},{34.398327, 9.202297, -20.779234},{34.202984, 9.134583, -20.462770},
{33.996277, 9.078190, -20.168699},{33.778728, 9.036007, -19.897488},{33.551201, 9.011227, -19.649143},{33.314983, 9.007397, -19.423218},
{33.071697, 9.028267, -19.218800},{32.823219, 9.077019, -19.034464},{32.571537, 9.155903, -18.868244},{32.318817, 9.266109, -18.717617},
{32.067337, 9.407833, -18.579529},{31.819523, 9.580261, -18.450367},{31.577950, 9.781544, -18.325979},{31.345329, 10.008842, -18.201662},
{31.124512, 10.258284, -18.072170},{30.918480, 10.524998, -17.931713},{30.730366, 10.803095, -17.773947},{30.563457, 11.085663, -17.591988},
{30.421116, 11.364840, -17.378469},{30.306446, 11.632654, -17.126467},{30.221729, 11.882048, -16.830650},{30.168404, 12.107000, -16.487429},
{30.147030, 12.302565, -16.094940},{30.157314, 12.464817, -15.653049},{30.198109, 12.590887, -15.163372},{30.267391, 12.678961, -14.629234},
{30.362293, 12.728258, -14.055706},{30.479073, 12.739054, -13.449600},{30.613144, 12.712667, -12.819435},{30.759056, 12.651461, -12.175489},
{30.910477, 12.558846, -11.529743},{31.060677, 12.438946, -10.895027},{31.203392, 12.295845, -10.282923},{31.333199, 12.133356, -9.703173},
{31.445427, 11.955032, -9.163717},{31.536190, 11.764185, -8.670660},{31.602402, 11.563848, -8.228291},{31.641792, 11.356787, -7.839052},
{31.652813, 11.145529, -7.503593},{31.634769, 10.932322, -7.220716},{31.587700, 10.719173, -6.987415},{31.512470, 10.507822, -6.798853},
{31.410709, 10.299728, -6.648367},{31.284756, 10.096115, -6.527760},{31.137058, 9.897953, -6.428854},{30.969982, 9.705942, -6.344240},
{30.785725, 9.520542, -6.267357},{30.586365, 9.341961, -6.192472},{30.373806, 9.170158, -6.114693},{30.149857, 9.004814, -6.029945},
{29.916145, 8.845398, -5.935009},{29.674175, 8.691093, -5.827471},{29.425320, 8.540855, -5.705757},{29.170792, 8.393372, -5.569147},
{28.911690, 8.247074, -5.417727},{28.648945, 8.100178, -5.252390},{28.383362, 7.950939, -5.074427},{28.115612, 7.797947, -4.885086},
{27.846233, 7.640125, -4.685528},{27.575619, 7.476780, -4.476841},{27.304031, 7.307575, -4.260029},{27.031605, 7.132504, -4.036015},
{26.758308, 6.951962, -3.805645},{26.484024, 6.766655, -3.569675},{26.208454, 6.577694, -3.328789},{25.931175, 6.386505, -3.083588},
{25.651665, 6.194904, -2.834583},{25.369205, 6.005035, -2.582222},{25.083088, 5.819225, -2.326912},{24.792759, 5.639553, -2.069180},
{24.497864, 5.467781, -1.809643},{24.198257, 5.305363, -1.549076},{23.894016, 5.153416, -1.288349},{23.585415, 5.012730, -1.028465},
{23.272942, 4.883789, -0.770550},{22.957302, 4.766739, -0.515850},{22.639389, 4.661423, -0.265732},{22.320324, 4.567356, -0.021694},
{22.001431, 4.483715, 0.214653},{21.684242, 4.409374, 0.441574},{21.370434, 4.342941, 0.657272},{21.061546, 4.283070, 0.860115},
{20.758835, 4.228569, 1.048779},{20.463295, 4.178391, 1.222244},{20.175644, 4.131695, 1.379757},{19.896324, 4.087772, 1.520893},
{19.625504, 4.046082, 1.645504},{19.363064, 4.006275, 1.753746},{19.108639, 3.968140, 1.846050},{18.861576, 3.931633, 1.923191},
{18.620934, 3.896893, 1.986195},{18.385509, 3.864227, 2.036392},{18.153866, 3.834057, 2.075417},{17.924549, 3.806858, 2.104919},
{17.696342, 3.782986, 2.126484},{17.468304, 3.762672, 2.141514},{17.239731, 3.746063, 2.151295},{17.010162, 3.733143, 2.156963},
{16.779438, 3.723824, 2.159542},{16.547585, 3.717876, 2.159885},{16.314953, 3.714970, 2.158733},{16.082104, 3.714642, 2.156677},
{15.849861, 3.716331, 2.154163},{15.619316, 3.719349, 2.151539},{15.391792, 3.722897, 2.148952},{15.168522, 3.726147, 2.146488},
{14.950077, 3.728394, 2.144115},{14.736252, 3.729038, 2.141731},{14.526051, 3.727657, 2.139149},{14.317703, 3.723934, 2.136105},
{14.108662, 3.717731, 2.132248},{13.895592, 3.709000, 2.127155},{13.674389, 3.697868, 2.120316},{13.440163, 3.684586, 2.111141},
{13.187225, 3.669548, 2.098961},{12.909145, 3.653290, 2.083023},{12.598682, 3.636478, 2.062489},{12.248257, 3.619881, 2.036499},
{11.851402, 3.604195, 2.004345},{11.403343, 3.590004, 1.965481},{10.901051, 3.577759, 1.919613},{10.343220, 3.567791, 1.866642},
{9.730228, 3.560295, 1.806667},{9.064217, 3.555355, 1.740017},{8.349010, 3.552929, 1.667194},{7.590178, 3.552834, 1.588943},
{6.794991, 3.554775, 1.506214},{5.972466, 3.558323, 1.420139},{5.133314, 3.562939, 1.332092},{4.289766, 3.567955, 1.243595},
{3.453876, 3.572731, 1.156174},{2.636265, 3.576706, 1.071140},{1.845974, 3.579460, 0.989605},{1.090508, 3.580654, 0.912487},
{0.375822, 3.580074, 0.840492},{-0.293678, 3.577618, 0.774124},{-0.915136, 3.573273, 0.713680},{-1.487240, 3.567158, 0.659256},
{-2.010237, 3.559494, 0.610760},{-2.485912, 3.550610, 0.567867},{-2.917601, 3.540936, 0.530079},{-3.310154, 3.531021, 0.496670},
{-3.669222, 3.521446, 0.466846},{-4.000141, 3.512745, 0.439838},{-4.307785, 3.505363, 0.414970},{-4.596539, 3.499676, 0.391640},
{-4.870327, 3.495991, 0.369308},{-5.132586, 3.494511, 0.347546},{-5.386280, 3.495411, 0.325958},{-5.633907, 3.498749, 0.304253},
{-5.877481, 3.504532, 0.282211},{-6.118538, 3.512684, 0.259686},{-6.358154, 3.523056, 0.236607},{-6.596909, 3.535416, 0.212982},
{-6.835022, 3.549484, 0.188881},{-7.072598, 3.564987, 0.164371},{-7.309723, 3.581673, 0.139538},{-7.546490, 3.599312, 0.114437},
{-7.782978, 3.617706, 0.089127},{-8.019249, 3.636658, 0.063656},{-8.255365, 3.656040, 0.038063},{-8.491371, 3.675694, 0.012398},
{-8.727310, 3.695538, -0.013321},{-8.963211, 3.715477, -0.039066},{-9.199098, 3.735458, -0.064819},{-9.434979, 3.755447, -0.090580},
{-9.670874, 3.775436, -0.116299},{-9.906877, 3.795361, -0.141586},{-10.143221, 3.815102, -0.165520},{-10.380285, 3.834469, -0.186642},
{-10.618573, 3.853149, -0.202930},{-10.858745, 3.870834, -0.211830},{-11.101583, 3.887074, -0.210236},{-11.348020, 3.901375, -0.194496},
{-11.599120, 3.913151, -0.160408},{-11.856092, 3.921768, -0.103237},{-12.120281, 3.926491, -0.017681},{-12.393172, 3.926517, 0.102085},
{-12.676362, 3.920982, 0.262405},{-12.971179, 3.909069, 0.469452},{-13.278165, 3.890182, 0.728344},{-13.597020, 3.863949, 1.043007},
{-13.926594, 3.830227, 1.416222},{-14.264894, 3.789124, 1.849567},{-14.609072, 3.740963, 2.343498},{-14.955442, 3.686310, 2.897251},
{-15.299465, 3.625957, 3.508919},{-15.635758, 3.560936, 4.175407},{-15.958093, 3.492516, 4.892467},{-16.259390, 3.422184, 5.654655},
{-16.531734, 3.351673, 6.455383},{-16.766928, 3.282825, 7.287251},{-16.957909, 3.217346, 8.142910},{-17.099159, 3.156693, 9.015408},
{-17.186722, 3.102116, 9.898098},{-17.218178, 3.054611, 10.784714},{-17.192667, 3.014957, 11.669315},{-17.110870, 2.983685, 12.546326},
{-16.975025, 2.961117, 13.410496},{-16.788914, 2.947323, 14.256943},{-16.557873, 2.942150, 15.081127},{-16.288786, 2.945225, 15.878860},
{-15.990087, 2.955917, 16.646286},{-15.671443, 2.973408, 17.379932},{-15.342048, 2.996777, 18.076763},{-15.009638, 3.025089, 18.734222},
{-14.680455, 3.057381, 19.350269},{-14.359246, 3.092678, 19.923321},{-14.049257, 3.129967, 20.452335},{-13.752251, 3.168240, 20.936714},
{-13.468482, 3.206448, 21.376400},{-13.196719, 3.243519, 21.771782},{-12.934236, 3.278393, 22.123768},{-12.676803, 3.309952, 22.433758},
{-12.418702, 3.337070, 22.703632},{-12.152815, 3.358624, 22.935753},{-11.871822, 3.373619, 23.132690},{-11.569551, 3.381310, 23.296925},
{-11.241138, 3.381321, 23.430805},{-10.883006, 3.373528, 23.536564},{-10.492880, 3.358124, 23.616318},{-10.069783, 3.335625, 23.672050},
{-9.614029, 3.306835, 23.705627},{-9.127234, 3.272861, 23.718803},{-8.612309, 3.235126, 23.713184},{-8.073463, 3.195335, 23.690277},
{-7.516197, 3.155537, 23.651459},{-6.947306, 3.118034, 23.597984},{-6.374279, 3.085281, 23.531021},{-5.804066, 3.059422, 23.451706},
{-5.242744, 3.042213, 23.361149},{-4.695545, 3.035034, 23.260452},{-4.166828, 3.038864, 23.150707},{-3.660105, 3.054310, 23.032993},
{-3.178019, 3.081562, 22.908352},{-2.722351, 3.120461, 22.777836},{-2.294035, 3.170418, 22.642471},{-1.893131, 3.230484, 22.503277},
{-1.518845, 3.299301, 22.361244},{-1.169525, 3.375141, 22.217350},{-0.842798, 3.455956, 22.072571},{-0.536201, 3.539749, 21.927769},
{-0.247488, 3.624718, 21.783775},{0.025351, 3.709301, 21.641308},{0.284098, 3.792149, 21.500961},{0.530308, 3.872131, 21.363316},
{0.765301, 3.948353, 21.228798},{0.990177, 4.020115, 21.097790},{1.205793, 4.086956, 20.970562},{1.412786, 4.148636, 20.847313},
{1.611563, 4.205124, 20.728127},{1.802290, 4.256618, 20.613033},{1.984928, 4.303535, 20.501949},{2.159365, 4.346352, 20.394768},
{2.325541, 4.385551, 20.291355},{2.483471, 4.421581, 20.191544},{2.633251, 4.454834, 20.095192},{2.775053, 4.485691, 20.002125},
{2.909103, 4.514484, 19.912151},{3.035727, 4.541527, 19.825085},{3.155304, 4.567081, 19.740715},{3.268295, 4.591400, 19.658802},
{3.375238, 4.614677, 19.579140},{3.476736, 4.637093, 19.501457},{3.573471, 4.658783, 19.425510},{3.666153, 4.679855, 19.351036},
{3.755428, 4.700397, 19.277786},{3.841866, 4.720509, 19.205536},{3.925974, 4.740242, 19.134087},{4.008163, 4.759644, 19.063236},
{4.088789, 4.778751, 18.992840},{4.168123, 4.797588, 18.922737},{4.246361, 4.816158, 18.852802},{4.323626, 4.834446, 18.782944},
{4.399956, 4.852432, 18.713070},{4.475327, 4.870071, 18.643105},{4.549637, 4.887325, 18.573013},{4.622719, 4.904102, 18.502747},
{4.694414, 4.920345, 18.432293},{4.764601, 4.935959, 18.361603},{4.833187, 4.950874, 18.290623},{4.900108, 4.964977, 18.219292},
{4.965349, 4.978172, 18.147572},{5.028912, 4.990372, 18.075359},{5.090843, 5.001450, 18.002583},{5.151211, 5.011292, 17.929157},
{5.210133, 5.019775, 17.854984},{5.267746, 5.026775, 17.779945},{5.324221, 5.032158, 17.703922},{5.379793, 5.035782, 17.626762},
{5.434912, 5.037521, 17.547684},{5.490393, 5.037266, 17.464996},{5.547430, 5.034927, 17.375965},{5.607582, 5.030449, 17.276871},
{5.672796, 5.023781, 17.162983},{5.745390, 5.014896, 17.028576},{5.828041, 5.003799, 16.866917},{5.923824, 4.990513, 16.670277},
{6.036173, 4.975079, 16.429909},{6.168898, 4.957554, 16.136078},{6.326193, 4.938026, 15.778046},{6.512590, 4.916599, 15.344112},
{6.732443, 4.893406, 14.823074},{6.988993, 4.868626, 14.206356},{7.284307, 4.842445, 13.488560},{7.619162, 4.815121, 12.667278},
{7.993149, 4.786926, 11.743252},{8.404629, 4.758171, 10.720276},{8.850704, 4.729214, 9.605221},{9.327293, 4.700432, 8.408077},
{9.829044, 4.672260, 7.141861},{10.349403, 4.645157, 5.822720},{10.880585, 4.619621, 4.469864},{11.413574, 4.596180, 3.105576},
{11.938641, 4.575390, 1.754059},{12.446991, 4.557743, 0.437695},{12.931335, 4.543644, -0.824272},{13.385929, 4.533424, -2.015781},
{13.806522, 4.527336, -3.123940},{14.190422, 4.525547, -4.139011},{14.536453, 4.528126, -5.054453},{14.844940, 4.535091, -5.866865},
{15.117760, 4.546352, -6.576042},{15.358303, 4.561752, -7.184942},{15.571495, 4.581043, -7.699678},{15.763783, 4.603909, -8.129545},
{15.942921, 4.629932, -8.486687},{16.116604, 4.658710, -8.783770},{16.291397, 4.689842, -9.032362},{16.472755, 4.722946, -9.242834},
{16.664955, 4.757683, -9.424370},{16.871132, 4.793713, -9.584953},{17.093296, 4.830727, -9.731377},{17.332279, 4.868446, -9.869242},
{17.587765, 4.906612, -10.002953},{17.858318, 4.944981, -10.135725},{18.141319, 4.983334, -10.269579},{18.433029, 5.021484, -10.405334},
{18.728577, 5.059246, -10.542656},{19.022633, 5.096493, -10.680517},{19.310261, 5.133049, -10.817888},{19.587101, 5.168762, -10.953808},
{19.849293, 5.203487, -11.087402},{20.093529, 5.237095, -11.217882},{20.317043, 5.269432, -11.344530},{20.517605, 5.300354, -11.466715},
{20.693531, 5.329723, -11.583885},{20.843647, 5.357422, -11.695568},{20.967350, 5.383297, -11.801376},{21.064556, 5.407227, -11.900997},
{21.135727, 5.429085, -11.994198},{21.181774, 5.448769, -12.080845},{21.203869, 5.466228, -12.160889},{21.203377, 5.481487, -12.234404},
{21.181824, 5.494675, -12.301559},{21.140942, 5.505966, -12.362644},{21.082645, 5.515636, -12.418047},{21.009029, 5.524021, -12.468262},
{20.922367, 5.531548, -12.513905},{20.825142, 5.538704, -12.555677},{20.720005, 5.546070, -12.594408},{20.609795, 5.554302, -12.631023},
{20.497532, 5.564129, -12.666561},{20.386364, 5.576324, -12.702139},{20.279099, 5.591553, -12.738802},{20.177979, 5.610260, -12.777435},
{20.084648, 5.632641, -12.818743},{20.000164, 5.658707, -12.863276},{19.924992, 5.688198, -12.911404},{19.858986, 5.720676, -12.963337},
{19.801445, 5.755436, -13.019102},{19.751041, 5.791580, -13.078575},{19.705875, 5.827957, -13.141455},{19.663452, 5.863213, -13.207264},
{19.620667, 5.895767, -13.275372},{19.573898, 5.923809, -13.344967},{19.519463, 5.945572, -13.415211},{19.454262, 5.959579, -13.485352},
{19.375881, 5.964687, -13.554731},{19.282539, 5.960060, -13.622818},{19.173122, 5.945229, -13.689169},{19.047195, 5.920013, -13.753454},
{18.904953, 5.884586, -13.815456},{18.747253, 5.839443, -13.875055},{18.575626, 5.785404, -13.932245},{18.392258, 5.723618, -13.987120},
{18.199982, 5.655563, -14.039886},{18.002296, 5.583046, -14.090849},{17.803059, 5.508060, -14.140387},{17.605839, 5.432434, -14.188862},
{17.413708, 5.357800, -14.236605},{17.229305, 5.285515, -14.283890},{17.054760, 5.216736, -14.330963},{16.891758, 5.152378, -14.378046},
{16.741478, 5.093132, -14.425301},{16.604671, 5.039452, -14.472862},{16.481590, 4.991543, -14.520815},{16.372017, 4.949421, -14.569225},
{16.275269, 4.912823, -14.618107},{16.190178, 4.881294, -14.667437},{16.115200, 4.854153, -14.717159},{16.048706, 4.830715, -14.767218},
{15.989258, 4.810318, -14.817545},{15.935497, 4.792412, -14.868099},{15.886238, 4.776451, -14.918827},{15.840435, 4.761997, -14.969692},
{15.797176, 4.748642, -15.020653},{15.755676, 4.736061, -15.071684},{15.715317, 4.723976, -15.122761},{15.675606, 4.712166, -15.173862},
{15.636185, 4.700485, -15.224976},{15.596848, 4.688843, -15.276089},{15.557514, 4.677208, -15.327209},{15.518185, 4.665562, -15.378323},
{15.478859, 4.653923, -15.429441},{15.439522, 4.642281, -15.480556},{15.400188, 4.630642, -15.531673},{15.360859, 4.618999, -15.582788},
{15.321533, 4.607357, -15.633905},{15.282200, 4.595715, -15.685022},{15.242870, 4.584072, -15.736137},{15.203537, 4.572437, -15.787256},
{15.164211, 4.560791, -15.838371},{15.124878, 4.549149, -15.889488},{15.085548, 4.537510, -15.940601},{15.046219, 4.525875, -15.991720},
{15.006889, 4.514225, -16.042833},{14.967556, 4.502583, -16.093950},{14.928223, 4.490944, -16.145067},{14.888893, 4.479305, -16.196184},
{14.849564, 4.467659, -16.247301},{14.810234, 4.456020, -16.298414},{14.770905, 4.444378, -16.349531},{14.731571, 4.432743, -16.400650},
{14.692242, 4.421104, -16.451767},{14.652916, 4.409458, -16.502882},{14.613575, 4.397820, -16.553999},{14.574249, 4.386177, -16.605114},
{14.534920, 4.374531, -16.656227},{14.495586, 4.362892, -16.707344},{14.456253, 4.351250, -16.758461},{14.416931, 4.339611, -16.809578},
{14.377594, 4.327972, -16.860695},{14.338261, 4.316334, -16.911814},{14.298935, 4.304691, -16.962929},{14.259605, 4.293049, -17.014044},
{14.220272, 4.281410, -17.065161},{14.180939, 4.269772, -17.116280},{14.141613, 4.258125, -17.167391},{14.102283, 4.246483, -17.218508},
{14.062950, 4.234844, -17.269625},{14.023621, 4.223202, -17.320744},{13.984291, 4.211559, -17.371859},{13.944958, 4.199917, -17.422976},
{13.905628, 4.188278, -17.474089},{13.866295, 4.176640, -17.525208},{13.826965, 4.164997, -17.576324},{13.787636, 4.153358, -17.627439},
{13.748306, 4.141712, -17.678556},{13.708977, 4.130074, -17.729671},{13.669647, 4.118439, -17.780787},{13.630318, 4.106792, -17.831903},
{13.590981, 4.095154, -17.883018},{13.551651, 4.083511, -17.934135},{13.512325, 4.071869, -17.985252},{13.472992, 4.060226, -18.036369},
{13.433655, 4.048588, -18.087484},{13.394325, 4.036949, -18.138603},{13.354996, 4.025307, -18.189720},{13.315666, 4.013664, -18.240835},
{13.276337, 4.002029, -18.291950},{13.237007, 3.990379, -18.343065},{13.197674, 3.978741, -18.394182},{13.158344, 3.967106, -18.445301},
{13.118996, 3.955444, -18.496408},{13.079506, 3.943741, -18.547483},{13.039642, 3.931892, -18.598463},{12.999046, 3.919743, -18.649254},
{12.957249, 3.907108, -18.699730},{12.913624, 3.893749, -18.749739},{12.867481, 3.879368, -18.799091},{12.817955, 3.863628, -18.847567},
{12.764088, 3.846149, -18.894920},{12.704784, 3.826488, -18.940868},{12.638851, 3.804161, -18.985102},{12.564949, 3.778633, -19.027271},
{12.481655, 3.749329, -19.067007},{12.387714, 3.715767, -19.103958},{12.282211, 3.677593, -19.137810},{12.164597, 3.634632, -19.168304},
{12.034653, 3.586853, -19.195221},{11.892529, 3.534397, -19.218401},{11.738750, 3.477554, -19.237719},{11.574169, 3.416756, -19.253099},
{11.399994, 3.352638, -19.264523},{11.217819, 3.285954, -19.272009},{11.029560, 3.217628, -19.275627},{10.837505, 3.148750, -19.275494},
{10.644287, 3.080551, -19.271774},{10.452618, 3.014297, -19.264654},{10.264969, 2.951111, -19.254314},{10.083481, 2.891930, -19.240929},
{9.909981, 2.837509, -19.224651},{9.745991, 2.788448, -19.205627},{9.592697, 2.745159, -19.183994},{9.450981, 2.707863, -19.159876},
{9.321404, 2.676636, -19.133381},{9.204224, 2.651348, -19.104610},{9.099350, 2.631718, -19.073654},{9.006420, 2.617271, -19.040590},
{8.924717, 2.607368, -19.005484},{8.853302, 2.601234, -18.968384},{8.791229, 2.598125, -18.929363},{8.737568, 2.597382, -18.888483},
{8.691479, 2.598381, -18.845819},{8.652153, 2.600613, -18.801456},{8.618839, 2.603607, -18.755470},{8.590832, 2.606995, -18.707970},
{8.567490, 2.610455, -18.659050},{8.548218, 2.613743, -18.608818},{8.532478, 2.616699, -18.557388},{8.519764, 2.619225, -18.504883},
{8.509655, 2.621296, -18.451431},{8.501755, 2.622952, -18.397165},{8.495712, 2.624264, -18.342213},{8.491211, 2.625282, -18.286694},
{8.487957, 2.626068, -18.230711},{8.485699, 2.626675, -18.174362},{8.484196, 2.627129, -18.117737},{8.483265, 2.627480, -18.060900},
{8.482731, 2.627750, -18.003916},{8.482445, 2.627987, -17.946840},{8.482311, 2.628181, -17.889709},{8.482243, 2.628380, -17.832556},
{8.482197, 2.628559, -17.775393},{8.482155, 2.628742, -17.718224},{8.482109, 2.628929, -17.661058},{8.482063, 2.629112, -17.603895},
{8.482021, 2.629299, -17.546734},{8.481979, 2.629482, -17.489567},{8.481934, 2.629665, -17.432402},{8.481892, 2.629852, -17.375238},
{8.481846, 2.630039, -17.318073},{8.481800, 2.630219, -17.260910},{8.481762, 2.630402, -17.203743},{8.481720, 2.630585, -17.146578},
{8.481670, 2.630772, -17.089415},{8.481628, 2.630959, -17.032249},{8.481586, 2.631138, -16.975086},{8.481544, 2.631325, -16.917921},
{8.481503, 2.631504, -16.860756},{8.481461, 2.631695, -16.803591},{8.481415, 2.631874, -16.746426},{8.481369, 2.632065, -16.689264},
{8.481327, 2.632244, -16.632097},{8.481277, 2.632431, -16.574934},{8.481239, 2.632610, -16.517769},{8.481194, 2.632801, -16.460604},
{8.481152, 2.632980, -16.403439},{8.481110, 2.633167, -16.346275},{8.481068, 2.633350, -16.289110},{8.481018, 2.633530, -16.231945},
{8.480980, 2.633720, -16.174780},{8.480934, 2.633904, -16.117617},{8.480888, 2.634090, -16.060453},{8.480846, 2.634274, -16.003288},
{8.480804, 2.634457, -15.946121},{8.480762, 2.634636, -15.888958},{8.480713, 2.634830, -15.831797},{8.480671, 2.635014, -15.774630},
{8.480629, 2.635197, -15.717464},{8.480583, 2.635384, -15.660301},{8.480545, 2.635559, -15.603134},{8.480499, 2.635750, -15.545969},
{8.480457, 2.635933, -15.488808},{8.480412, 2.636116, -15.431643},{8.480370, 2.636303, -15.374477},{8.480328, 2.636482, -15.317312},
{8.480278, 2.636669, -15.260147},{8.480240, 2.636852, -15.202982},{8.480194, 2.637039, -15.145821},{8.480152, 2.637218, -15.088655},
{8.480103, 2.637409, -15.031490},{8.480064, 2.637585, -14.974325},{8.480019, 2.637772, -14.917160},{8.479977, 2.637955, -14.859997},
{8.479931, 2.638142, -14.802834},{8.479885, 2.638329, -14.745668},{8.479851, 2.638504, -14.688505},{8.479801, 2.638699, -14.631340},
{8.479755, 2.638882, -14.574175},{8.479713, 2.639065, -14.517012},{8.479668, 2.639252, -14.459845},{8.479622, 2.639435, -14.402679},
{8.479584, 2.639618, -14.345514},{8.479542, 2.639801, -14.288349},{8.479496, 2.639992, -14.231188},{8.479454, 2.640171, -14.174025},
{8.479404, 2.640335, -14.116858},{8.479359, 2.640453, -14.059698},{8.479290, 2.640495, -14.002544},{8.479202, 2.640385, -13.945402},
{8.479088, 2.640057, -13.888271},{8.478924, 2.639416, -13.831165},{8.478706, 2.638363, -13.774090},{8.478405, 2.636780, -13.717049},
{8.478008, 2.634518, -13.660059},{8.477501, 2.631439, -13.603127},{8.476845, 2.627380, -13.546261},{8.476025, 2.622154, -13.489479},
{8.475014, 2.615601, -13.432793},{8.473789, 2.607597, -13.376207},{8.472359, 2.598091, -13.319733},{8.470695, 2.587040, -13.263361},
{8.468826, 2.574459, -13.207100},{8.466743, 2.560425, -13.150946},{8.464470, 2.545048, -13.094881},{8.462040, 2.528481, -13.038904},
{8.459469, 2.510925, -12.982994},{8.456802, 2.492638, -12.927137},{8.454079, 2.473896, -12.871311},{8.451351, 2.455055, -12.815489},
{8.448677, 2.436459, -12.759655},{8.446102, 2.418438, -12.703779},{8.443657, 2.401253, -12.647839},{8.441391, 2.385139, -12.591825},
{8.439320, 2.370277, -12.535717},{8.437469, 2.356800, -12.479513},{8.435848, 2.344810, -12.423204},{8.434464, 2.334339, -12.366787},
{8.433323, 2.325390, -12.310259},{8.432407, 2.317913, -12.253624},{8.431698, 2.311829, -12.196896},{8.431194, 2.306992, -12.140072},
{8.430855, 2.303223, -12.083178},{8.430649, 2.300362, -12.026215},{8.430561, 2.298244, -11.969202},{8.430561, 2.296722, -11.912142},
{8.430641, 2.295677, -11.855051},{8.430775, 2.294991, -11.797935},{8.430950, 2.294571, -11.740799},{8.431152, 2.294334, -11.683649},
{8.431377, 2.294216, -11.626492},{8.431602, 2.294163, -11.569332},{8.431839, 2.294136, -11.512169},{8.432079, 2.294117, -11.455002},
{8.432320, 2.294094, -11.397837},{8.432552, 2.294075, -11.340675},{8.432793, 2.294060, -11.283510},{8.433022, 2.294037, -11.226345},
{8.433258, 2.294018, -11.169182},{8.433495, 2.293999, -11.112017},{8.433735, 2.293980, -11.054853},{8.433971, 2.293961, -10.997690},
{8.434208, 2.293938, -10.940525},{8.434448, 2.293922, -10.883362},{8.434685, 2.293900, -10.826195},{8.434917, 2.293877, -10.769030},
{8.435154, 2.293861, -10.711868},{8.435390, 2.293842, -10.654711},{8.435627, 2.293835, -10.597597},{8.435863, 2.293835, -10.540577},
{8.436089, 2.293858, -10.483738},{8.436314, 2.293922, -10.427170},{8.436531, 2.294033, -10.371008},{8.436737, 2.294228, -10.315397},
{8.436924, 2.294525, -10.260519},{8.437096, 2.294952, -10.206564},{8.437237, 2.295525, -10.153759},{8.437355, 2.296299, -10.102348},
{8.437435, 2.297302, -10.052601},{8.437477, 2.298565, -10.004789},{8.437473, 2.300125, -9.959106},{8.437424, 2.301994, -9.915665},
{8.437328, 2.304173, -9.874458},{8.437187, 2.306637, -9.835419},{8.437000, 2.309391, -9.798353},{8.436783, 2.312366, -9.762980},
{8.436535, 2.315521, -9.728930},{8.436272, 2.318798, -9.695730},{8.436001, 2.322117, -9.662823},{8.435738, 2.325386, -9.629545},
{8.435497, 2.328487, -9.595139},{8.435303, 2.331329, -9.558773},{8.435162, 2.333797, -9.519669},{8.435093, 2.335796, -9.477182},
{8.435104, 2.337261, -9.430826},{8.435204, 2.338146, -9.380234},{8.435390, 2.338425, -9.325203},{8.435680, 2.338074, -9.265661},
{8.436062, 2.337116, -9.201687},{8.436527, 2.335583, -9.133497},{8.437077, 2.333515, -9.061451},{8.437695, 2.330990, -8.986063},
{8.438366, 2.328094, -8.907974},{8.439083, 2.324936, -8.827969},{8.439823, 2.321625, -8.746880},{8.440559, 2.318268, -8.665459},
{8.441299, 2.314953, -8.584358},{8.442017, 2.311760, -8.504141},{8.442711, 2.308758, -8.425266},{8.443363, 2.305988, -8.348106},
{8.443977, 2.303497, -8.272936},{8.444542, 2.301292, -8.199926},{8.445065, 2.299404, -8.129166},{8.445541, 2.297821, -8.060633},
{8.445965, 2.296528, -7.994230},{8.446358, 2.295506, -7.929747},{8.446712, 2.294704, -7.866911},{8.447041, 2.294098, -7.805458},
{8.447346, 2.293644, -7.745142},{8.447624, 2.293316, -7.685732},{8.447895, 2.293091, -7.627050},{8.448151, 2.292931, -7.568907},
{8.448399, 2.292839, -7.511168},{8.448639, 2.292774, -7.453693},{8.448883, 2.292736, -7.396391},{8.449120, 2.292706, -7.339180},
{8.449356, 2.292690, -7.282001},{8.449593, 2.292671, -7.224838},{8.449829, 2.292648, -7.167673},{8.450069, 2.292633, -7.110510},
{8.450302, 2.292606, -7.053347},{8.450539, 2.292591, -6.996183},{8.450779, 2.292572, -6.939016},{8.451012, 2.292549, -6.881853},
{8.451248, 2.292534, -6.824686},{8.451485, 2.292511, -6.767523},{8.451725, 2.292484, -6.710356},{8.451962, 2.292469, -6.653193},
{8.452198, 2.292454, -6.596029},{8.452438, 2.292431, -6.538862},{8.452675, 2.292412, -6.481703},{8.452908, 2.292397, -6.424536},
{8.453144, 2.292377, -6.367373},{8.453381, 2.292358, -6.310205},{8.453617, 2.292339, -6.253042},{8.453854, 2.292313, -6.195879},
{8.454090, 2.292290, -6.138712},{8.454330, 2.292274, -6.081549},{8.454563, 2.292252, -6.024384},{8.454800, 2.292236, -5.967220},
{8.455036, 2.292217, -5.910055},{8.455273, 2.292202, -5.852892},{8.455513, 2.292183, -5.795727},{8.455746, 2.292160, -5.738565},
{8.455990, 2.292137, -5.681393},{8.456223, 2.292118, -5.624233},{8.456459, 2.292095, -5.567066},{8.456696, 2.292080, -5.509903},
{8.456932, 2.292061, -5.452740},{8.457169, 2.292046, -5.395576},{8.457405, 2.292023, -5.338409},{8.457642, 2.292004, -5.281246},
{8.457878, 2.291981, -5.224083},{8.458111, 2.291958, -5.166916},{8.458347, 2.291946, -5.109753},{8.458588, 2.291927, -5.052589},
{8.458820, 2.291904, -4.995422},{8.459064, 2.291882, -4.938259},{8.459293, 2.291862, -4.881096},{8.459534, 2.291851, -4.823933},
{8.459770, 2.291828, -4.766766},{8.460007, 2.291809, -4.709602},{8.460243, 2.291786, -4.652437},{8.460480, 2.291767, -4.595272},
{8.460716, 2.291752, -4.538113},{8.460957, 2.291733, -4.480946},{8.461189, 2.291710, -4.423779},{8.461426, 2.291691, -4.366619},
{8.461666, 2.291668, -4.309448},{8.461903, 2.291653, -4.252289},{8.462135, 2.291634, -4.195122},{8.462376, 2.291615, -4.137959},
{8.462612, 2.291592, -4.080795},{8.462845, 2.291573, -4.023632},{8.463085, 2.291553, -3.966465},{8.463322, 2.291538, -3.909302},
{8.463554, 2.291515, -3.852139},{8.463795, 2.291500, -3.794975},{8.464035, 2.291473, -3.737812},{8.464268, 2.291454, -3.680641},
{8.464504, 2.291439, -3.623482},{8.464745, 2.291416, -3.566315},{8.464981, 2.291397, -3.509151},{8.465218, 2.291374, -3.451988},
{8.465458, 2.291355, -3.394821},{8.465691, 2.291340, -3.337662},{8.465927, 2.291317, -3.280495},{8.466164, 2.291302, -3.223328},
{8.466400, 2.291279, -3.166168},{8.466637, 2.291260, -3.109001},{8.466877, 2.291241, -3.051838},{8.467110, 2.291218, -2.994675},
{8.467342, 2.291206, -2.937508},{8.467583, 2.291183, -2.880348},{8.467827, 2.291161, -2.823185},{8.468056, 2.291145, -2.766014},
{8.468296, 2.291122, -2.708851},{8.468533, 2.291107, -2.651688},{8.468769, 2.291084, -2.594521},{8.469002, 2.291069, -2.537361},
{8.469242, 2.291046, -2.480194},{8.469479, 2.291027, -2.423031},{8.469711, 2.291008, -2.365864},{8.469952, 2.290985, -2.308704},
{8.470184, 2.290970, -2.251537},{8.470421, 2.290951, -2.194370},{8.470661, 2.290928, -2.137207},{8.470898, 2.290913, -2.080044},
{8.471134, 2.290890, -2.022881},{8.471367, 2.290874, -1.965717},{8.471607, 2.290848, -1.908550},{8.471848, 2.290829, -1.851387},
{8.472073, 2.290817, -1.794224},{8.472321, 2.290791, -1.737053},{8.472553, 2.290775, -1.679890},{8.472790, 2.290752, -1.622726},
{8.473026, 2.290730, -1.565563},{8.473263, 2.290714, -1.508396},{8.473499, 2.290695, -1.451237},{8.473736, 2.290676, -1.394070},
{8.473972, 2.290657, -1.336906},{8.474213, 2.290634, -1.279743},{8.474445, 2.290619, -1.222576},{8.474686, 2.290596, -1.165413},
{8.474915, 2.290581, -1.108250},{8.475155, 2.290558, -1.051086},{8.475391, 2.290543, -0.993923},{8.475632, 2.290520, -0.936756},
{8.475864, 2.290501, -0.879593},{8.476101, 2.290482, -0.822430},{8.476345, 2.290462, -0.765263},{8.476578, 2.290443, -0.708103},
{8.476810, 2.290428, -0.650940},{8.477051, 2.290401, -0.593773},{8.477287, 2.290386, -0.536610},{8.477520, 2.290367, -0.479446},
{8.477764, 2.290344, -0.422272},{8.477997, 2.290325, -0.365112},{8.478233, 2.290306, -0.307945},{8.478470, 2.290283, -0.250782},
{8.478710, 2.290264, -0.193619},{8.478943, 2.290241, -0.136452},{8.479176, 2.290226, -0.079292},{8.479416, 2.290207, -0.022118},
{8.479656, 2.290180, 0.035042},{8.479893, 2.290165, 0.092209},{8.480125, 2.290146, 0.149372},{8.480362, 2.290127, 0.206535},
{8.480598, 2.290108, 0.263699},{8.480839, 2.290085, 0.320866},{8.481075, 2.290066, 0.378029},{8.481308, 2.290047, 0.435192},
{8.481544, 2.290031, 0.492355},{8.481781, 2.290012, 0.549519},{8.482021, 2.289989, 0.606686},{8.482254, 2.289970, 0.663849},
{8.482494, 2.289948, 0.721016},{8.482735, 2.289928, 0.778179},{8.482967, 2.289913, 0.835342},{8.483204, 2.289890, 0.892506},
{8.483444, 2.289867, 0.949673},{8.483677, 2.289852, 1.006840},{8.483913, 2.289833, 1.063999},{8.484154, 2.289818, 1.121166},
{8.484386, 2.289795, 1.178329},{8.484623, 2.289772, 1.235497},{8.484863, 2.289753, 1.292660},{8.485100, 2.289738, 1.349823},
{8.485332, 2.289715, 1.406986},{8.485577, 2.289696, 1.464149},{8.485809, 2.289677, 1.521313},{8.486046, 2.289658, 1.578476},
{8.486279, 2.289642, 1.635643},{8.486519, 2.289623, 1.692806},{8.486755, 2.289600, 1.749969},{8.486992, 2.289574, 1.807140},
{8.487232, 2.289558, 1.864300},{8.487465, 2.289539, 1.921467},{8.487705, 2.289520, 1.978630},{8.487942, 2.289494, 2.035793},
{8.488178, 2.289478, 2.092960},{8.488407, 2.289463, 2.150124},{8.488647, 2.289440, 2.207287},{8.488884, 2.289421, 2.264458},
{8.489120, 2.289402, 2.321617},{8.489361, 2.289383, 2.378784},{8.489594, 2.289364, 2.435947},{8.489834, 2.289337, 2.493114},
{8.490067, 2.289326, 2.550274},{8.490303, 2.289307, 2.607433},{8.490543, 2.289284, 2.664604},{8.490780, 2.289261, 2.721771},
{8.491013, 2.289246, 2.778934},{8.491253, 2.289227, 2.836102},{8.491489, 2.289204, 2.893265},{8.491726, 2.289188, 2.950428},
{8.491966, 2.289165, 3.007591},{8.492199, 2.289146, 3.064754},{8.492435, 2.289127, 3.121925},{8.492672, 2.289104, 3.179081},
{8.492908, 2.289085, 3.236248},{8.493141, 2.289074, 3.293411},{8.493382, 2.289051, 3.350578},{8.493622, 2.289028, 3.407742},
{8.493855, 2.289013, 3.464905},{8.494095, 2.288986, 3.522072},{8.494335, 2.288975, 3.579235},{8.494564, 2.288952, 3.636398},
{8.494801, 2.288933, 3.693565},{8.495037, 2.288910, 3.750729},{8.495277, 2.288895, 3.807892},{8.495510, 2.288879, 3.865055},
{8.495750, 2.288857, 3.922222},{8.495987, 2.288834, 3.979385},{8.496220, 2.288815, 4.036549},{8.496464, 2.288795, 4.093716},
{8.496693, 2.288780, 4.150875},{8.496933, 2.288754, 4.208046},{8.497173, 2.288738, 4.265205},{8.497410, 2.288715, 4.322372},
{8.497643, 2.288700, 4.379532},{8.497879, 2.288677, 4.436699},{8.498119, 2.288662, 4.493866},{8.498356, 2.288643, 4.551025},
{8.498592, 2.288616, 4.608200},{8.498829, 2.288597, 4.665352},{8.499065, 2.288582, 4.722523},{8.499302, 2.288563, 4.779682},
{8.499538, 2.288544, 4.836845},{8.499775, 2.288521, 4.894012},{8.500011, 2.288498, 4.951180},{8.500248, 2.288483, 5.008343},
{8.500488, 2.288464, 5.065514},{8.500721, 2.288445, 5.122673},{8.500957, 2.288425, 5.179836},{8.501194, 2.288403, 5.237000},
{8.501434, 2.288387, 5.294167},{8.501671, 2.288364, 5.351334},{8.501904, 2.288349, 5.408493},{8.502140, 2.288330, 5.465656},
{8.502377, 2.288303, 5.522823},{8.502613, 2.288288, 5.579987},{8.502853, 2.288265, 5.637150},{8.503086, 2.288242, 5.694321},
{8.503323, 2.288231, 5.751484},{8.503559, 2.288208, 5.808643},{8.503799, 2.288193, 5.865810},{8.504032, 2.288166, 5.922977},
{8.504272, 2.288151, 5.980137},{8.504509, 2.288132, 6.037308},{8.504742, 2.288113, 6.094463},{8.504978, 2.288090, 6.151634},
{8.505215, 2.288071, 6.208797},{8.505455, 2.288048, 6.265965},{8.505695, 2.288029, 6.323128},{8.505928, 2.288010, 6.380291},
{8.506165, 2.287991, 6.437458},{8.506401, 2.287971, 6.494617},{8.506638, 2.287952, 6.551785},{8.506878, 2.287933, 6.608948},
{8.507114, 2.287910, 6.666111},{8.507351, 2.287895, 6.723278},{8.507584, 2.287876, 6.780441},{8.507820, 2.287853, 6.837605},
{8.508057, 2.287838, 6.894768},{8.508297, 2.287815, 6.951935},{8.508533, 2.287800, 7.009098},{8.508766, 2.287777, 7.066265},
{8.509010, 2.287758, 7.123425},{8.509243, 2.287739, 7.180595},{8.509472, 2.287724, 7.237751},{8.509716, 2.287697, 7.294922},
{8.509953, 2.287682, 7.352085},{8.510189, 2.287663, 7.409248},{8.510422, 2.287643, 7.466412},{8.510662, 2.287621, 7.523579},
{8.510902, 2.287598, 7.580746},{8.511135, 2.287579, 7.637909},{8.511375, 2.287556, 7.695072},{8.511608, 2.287544, 7.752239},
{8.511845, 2.287521, 7.809399},{8.512081, 2.287502, 7.866562},{8.512321, 2.287483, 7.923733},{8.512554, 2.287464, 7.980892},
{8.512794, 2.287441, 8.038059},{8.513027, 2.287422, 8.095222},{8.513264, 2.287407, 8.152390},{8.513500, 2.287384, 8.209557},
{8.513744, 2.287365, 8.266720},{8.513977, 2.287346, 8.323887},{8.514214, 2.287323, 8.381046},{8.514450, 2.287308, 8.438213},
{8.514683, 2.287289, 8.495377},{8.514919, 2.287266, 8.552540},{8.515156, 2.287251, 8.609699},{8.515392, 2.287228, 8.666862},
{8.515633, 2.287205, 8.724037},{8.515869, 2.287189, 8.781197},{8.516106, 2.287170, 8.838364},{8.516346, 2.287151, 8.895527},
{8.516579, 2.287132, 8.952690},{8.516819, 2.287109, 9.009857},{8.517056, 2.287090, 9.067020},{8.517288, 2.287075, 9.124184},
{8.517529, 2.287052, 9.181347},{8.517765, 2.287037, 9.238510},{8.517998, 2.287010, 9.295673},{8.518238, 2.286995, 9.352844},
{8.518475, 2.286972, 9.410007},{8.518707, 2.286961, 9.467167},{8.518948, 2.286938, 9.524334},{8.519188, 2.286915, 9.581493},
{8.519421, 2.286900, 9.638660},{8.519665, 2.286873, 9.695831},{8.519894, 2.286854, 9.752991},{8.520130, 2.286842, 9.810154},
{8.520367, 2.286823, 9.867321},{8.520607, 2.286800, 9.924484},{8.520844, 2.286781, 9.981651},{8.521076, 2.286762, 10.038811},
{8.521309, 2.286739, 10.095978},{8.521553, 2.286724, 10.153145},{8.521790, 2.286705, 10.210304},{8.522022, 2.286682, 10.267475},
{8.522259, 2.286667, 10.324635},{8.522495, 2.286644, 10.381802},{8.522732, 2.286629, 10.438961},{8.522972, 2.286606, 10.496128},
{8.523209, 2.286587, 10.553295},{8.523441, 2.286568, 10.610455},{8.523678, 2.286549, 10.667618},{8.523914, 2.286530, 10.724785},
{8.524155, 2.286507, 10.781948},{8.524387, 2.286491, 10.839108},{8.524628, 2.286472, 10.896278},{8.524864, 2.286449, 10.953442},
{8.525097, 2.286430, 11.010601},{8.525341, 2.286407, 11.067776},{8.525574, 2.286385, 11.124935},{8.525810, 2.286369, 11.182106},
{8.526047, 2.286354, 11.239262},{8.526287, 2.286331, 11.296425},{8.526520, 2.286316, 11.353592},{8.526756, 2.286293, 11.410755},
{8.526997, 2.286278, 11.467918},{8.527233, 2.286255, 11.525085},{8.527470, 2.286240, 11.582253},{8.527706, 2.286213, 11.639416},
{8.527943, 2.286194, 11.696579},{8.528175, 2.286175, 11.753742},{8.528412, 2.286160, 11.810905},{8.528652, 2.286133, 11.868073},
{8.528889, 2.286121, 11.925236},{8.529125, 2.286098, 11.982399},{8.529366, 2.286076, 12.039566},{8.529598, 2.286060, 12.096729},
{8.529835, 2.286041, 12.153893},{8.530075, 2.286022, 12.211056},{8.530308, 2.285999, 12.268219},{8.530544, 2.285980, 12.325386},
{8.530781, 2.285965, 12.382545},{8.531021, 2.285938, 12.439716},{8.531254, 2.285927, 12.496876},{8.531494, 2.285900, 12.554043},
{8.531727, 2.285885, 12.611206},{8.531963, 2.285866, 12.668373},{8.532204, 2.285839, 12.725536},{8.532440, 2.285828, 12.782700},
{8.532673, 2.285801, 12.839867},{8.532913, 2.285786, 12.897030},{8.533150, 2.285767, 12.954193},{8.533386, 2.285744, 13.011360},
{8.533619, 2.285728, 13.068523},{8.533859, 2.285706, 13.125687},{8.534096, 2.285690, 13.182850},{8.534328, 2.285671, 13.240017},
{8.534565, 2.285648, 13.297173},{8.534809, 2.285629, 13.354347},{8.535038, 2.285610, 13.411503},{8.535278, 2.285591, 13.468674},
{8.535515, 2.285572, 13.525837},{8.535751, 2.285553, 13.583004},{8.535988, 2.285534, 13.640163},{8.536228, 2.285511, 13.697334},
{8.536461, 2.285488, 13.754498},{8.536701, 2.285473, 13.811665},{8.536934, 2.285454, 13.868828},{8.537174, 2.285435, 13.925991},
{8.537411, 2.285412, 13.983154},{8.537643, 2.285389, 14.040318},{8.537888, 2.285374, 14.097488},{8.538120, 2.285347, 14.154652},
{8.538357, 2.285336, 14.211815},{8.538597, 2.285316, 14.268982},{8.538830, 2.285297, 14.326145},{8.539066, 2.285282, 14.383305},
{8.539303, 2.285255, 14.440472},{8.539539, 2.285240, 14.497631},{8.539772, 2.285217, 14.554798},{8.540020, 2.285194, 14.611961},
{8.540253, 2.285179, 14.669132},{8.540485, 2.285156, 14.726295},{8.540726, 2.285141, 14.783455},{8.540962, 2.285122, 14.840618},
{8.541199, 2.285099, 14.897785},{8.541435, 2.285080, 14.954952},{8.541672, 2.285061, 15.012108},{8.541908, 2.285042, 15.069275},
{8.542149, 2.285023, 15.126442},{8.542381, 2.285004, 15.183605},{8.542618, 2.284985, 15.240772},{8.542847, 2.284966, 15.297932},
{8.543091, 2.284943, 15.355099},{8.543324, 2.284927, 15.412254},{8.543564, 2.284901, 15.469437},{8.543804, 2.284885, 15.526596},
{8.544041, 2.284863, 15.583759},{8.544273, 2.284843, 15.640926},{8.544506, 2.284828, 15.698082},{8.544746, 2.284809, 15.755249},
{8.544983, 2.284790, 15.812412},{8.545219, 2.284767, 15.869576},{8.545456, 2.284748, 15.926750},{8.545692, 2.284733, 15.983913},
{8.545929, 2.284714, 16.041073},{8.546169, 2.284691, 16.098244},{8.546410, 2.284668, 16.155403},{8.546642, 2.284649, 16.212570},
{8.546879, 2.284630, 16.269733},{8.547119, 2.284607, 16.326900},{8.547352, 2.284592, 16.384064},{8.547588, 2.284569, 16.441227},
{8.547825, 2.284546, 16.498394},{8.548061, 2.284531, 16.555557},{8.548294, 2.284515, 16.612720},{8.548534, 2.284496, 16.669884},
{8.548779, 2.284473, 16.727051},{8.549007, 2.284454, 16.784214},{8.549244, 2.284435, 16.841381},{8.549480, 2.284416, 16.898540},
{8.549717, 2.284397, 16.955708},{8.549953, 2.284374, 17.012871},{8.550190, 2.284359, 17.070034},{8.550430, 2.284336, 17.127201},
{8.550667, 2.284313, 17.184364},{8.550903, 2.284294, 17.241531},{8.551136, 2.284279, 17.298695},{8.551376, 2.284256, 17.355854},
{8.551617, 2.284233, 17.413025},{8.551846, 2.284214, 17.470181},{8.552082, 2.284199, 17.527351},{8.552319, 2.284180, 17.584518},
{8.552563, 2.284157, 17.641678},{8.552795, 2.284134, 17.698849},{8.553028, 2.284126, 17.756004},{8.553268, 2.284100, 17.813175},
{8.553509, 2.284084, 17.870338},{8.553741, 2.284061, 17.927502},{8.553974, 2.284046, 17.984661},{8.554214, 2.284023, 18.041828},
{8.554451, 2.284008, 18.098991},{8.554691, 2.283985, 18.156158},{8.554924, 2.283966, 18.213318},{8.555161, 2.283947, 18.270489},
{8.555397, 2.283928, 18.327652},{8.555637, 2.283909, 18.384815},{8.555874, 2.283890, 18.441986},{8.556107, 2.283867, 18.499149},
{8.556347, 2.283848, 18.556316},{8.556583, 2.283829, 18.613472},{8.556820, 2.283810, 18.670639},{8.557056, 2.283791, 18.727798},
{8.557293, 2.283772, 18.784969},{8.557526, 2.283749, 18.842129},{8.557766, 2.283730, 18.899296},{8.558006, 2.283707, 18.956467},
{8.558239, 2.283695, 19.013622},{8.558475, 2.283669, 19.070793},{8.558712, 2.283653, 19.127953},{8.558945, 2.283638, 19.185108},
{8.559189, 2.283611, 19.242283},{8.559422, 2.283596, 19.299446},{8.559658, 2.283577, 19.356613},{8.559895, 2.283562, 19.413773},
{8.560131, 2.283539, 19.470936},{8.560371, 2.283520, 19.528099},{8.560612, 2.283501, 19.585270},{8.560844, 2.283474, 19.642433},
{8.561077, 2.283463, 19.699593},{8.561317, 2.283436, 19.756760},{8.561554, 2.283417, 19.813923},{8.561787, 2.283401, 19.871086},
{8.562027, 2.283379, 19.928253},{8.562267, 2.283360, 19.985416},{8.562500, 2.283340, 20.042583},{8.562737, 2.283321, 20.099743},
{8.562973, 2.283302, 20.156910},{8.563210, 2.283287, 20.214073},{8.563446, 2.283264, 20.271240},{8.563686, 2.283241, 20.328407},
{8.563923, 2.283222, 20.385571},{8.564152, 2.283207, 20.442726},{8.564396, 2.283184, 20.499889},{8.564632, 2.283165, 20.557068},
{8.564865, 2.283146, 20.614220},{8.565102, 2.283131, 20.671383},{8.565338, 2.283108, 20.728558},{8.565571, 2.283089, 20.785717},
{8.565815, 2.283066, 20.842884},{8.566051, 2.283047, 20.900051},{8.566284, 2.283031, 20.957203},{8.566521, 2.283009, 21.014378},
{8.566761, 2.282990, 21.071545},{8.566998, 2.282970, 21.128712},{8.567234, 2.282948, 21.185871},{8.567471, 2.282928, 21.243031},
{8.567703, 2.282913, 21.300198},{8.567947, 2.282894, 21.357365},{8.568180, 2.282871, 21.414532},{8.568417, 2.282852, 21.471699},
{8.568653, 2.282833, 21.528858},{8.568890, 2.282814, 21.586018},{8.569130, 2.282799, 21.643185},{8.569359, 2.282780, 21.700344},
{8.569599, 2.282753, 21.757504},{8.569839, 2.282730, 21.814678},{8.570072, 2.282719, 21.871838},{8.570312, 2.282696, 21.928997},
{8.570549, 2.282681, 21.986172},{8.570786, 2.282658, 22.043339},{8.571022, 2.282639, 22.100498},{8.571259, 2.282623, 22.157665},
{8.571495, 2.282597, 22.214825},{8.571732, 2.282578, 22.271992},{8.571968, 2.282558, 22.329151},{8.572205, 2.282539, 22.386318},
{8.572437, 2.282520, 22.443485},{8.572678, 2.282497, 22.500648},{8.572918, 2.282478, 22.557823},{8.573151, 2.282463, 22.614979},
{8.573387, 2.282440, 22.672138},{8.573624, 2.282421, 22.729305},{8.573860, 2.282406, 22.786469},{8.574100, 2.282383, 22.843636},
{8.574337, 2.282364, 22.900803},{8.574574, 2.282341, 22.957970},{8.574806, 2.282326, 23.015129},{8.575043, 2.282307, 23.072289},
{8.575283, 2.282284, 23.129463},{8.575512, 2.282269, 23.186649},{8.575760, 2.282242, 23.243893},{8.575993, 2.282223, 23.301216},
{8.576233, 2.282204, 23.358650},{8.576466, 2.282188, 23.416267},{8.576710, 2.282169, 23.474136},{8.576946, 2.282146, 23.532341},
{8.577190, 2.282131, 23.590935},{8.577442, 2.282108, 23.650040},{8.577682, 2.282085, 23.709759},{8.577930, 2.282070, 23.770214},
{8.578186, 2.282043, 23.831524},{8.578445, 2.282024, 23.893818},{8.578709, 2.282005, 23.957256},{8.578976, 2.281979, 24.022003},
{8.579254, 2.281952, 24.088211},{8.579533, 2.281937, 24.156063},{8.579823, 2.281914, 24.225746},{8.580116, 2.281887, 24.297474},
{8.580421, 2.281860, 24.371433},{8.580742, 2.281837, 24.447845},{8.581070, 2.281811, 24.526958},{8.581409, 2.281776, 24.609005},
{8.581760, 2.281750, 24.694256},{8.582127, 2.281723, 24.783211},{8.582512, 2.281689, 24.876640},{8.582928, 2.281654, 24.975616},
{8.583363, 2.281612, 25.081474},{8.583836, 2.281578, 25.195835},{8.584354, 2.281532, 25.320629},{8.584923, 2.281490, 25.458057},
{8.585556, 2.281433, 25.610607},{8.586262, 2.281376, 25.781055},{8.587051, 2.281311, 25.972462},{8.587933, 2.281239, 26.184891}
};//*/

float* BSpline::GetPoint(const int& i, float (&cpts)[1392][3]){
	// return 1st point  
	if (i<0)
		return  cpts[0];

	if (i<sizeof(cpts))
		return cpts[i];
	// return last point  

	return cpts[sizeof(cpts) - 1];
}//*/

BSpline::BSpline(vec3 color) : Model(), noOfPoints(1392), LOD(4) {

//	const int* size = new int(1392*4);
	Vertex vertexBuffer[5568]; //vBsize
	float t, it, b0, b1, b2, b3;
	vec3 pos;
	int j, i;
	AnimationKey* key;
	Animation* ani = new Animation();

	FILE * sceneF, * pillarF;
	if(!done){
		sceneF = fopen("../Assets/Scenes/spline.scene","w+");
		pillarF = fopen("../Assets/Scenes/pillarM.scene","w+");
	}
	string nm = "\"splineAnime\"", 
		a = "", //"[Animation]\nname = \"splineAnime\"\n"
		aKey = "", aKeyRo, pModel = "";//*/
	ani->mName = nm.c_str();

	for (j = 0; j < noOfPoints-4; j++){
		// for each section of curve, draw LOD number of divisions  
		for (i = 0; i != LOD; ++i){
			//the parametric time value 0 to 1 for this curve segment and use the leftover
			t = (float)i / LOD;
			it = 1.0 - t;

			// calculate blending functions for cubic bspline  
			b0 = it*it*it / 6.0f;
			b1 = (3 * t*t*t - 6 * t*t + 4) / 6.0f;
			b2 = (-3 * t*t*t + 3 * t*t + 3 * t + 1) / 6.0f;
			b3 = t*t*t / 6.0f;

			// calculate the x,y and z of the curve point =====cpts=====
			pos.x = b0 * GetPoint(j, map)[0] +
				b1 * GetPoint(j + 1, map)[0] +
				b2 * GetPoint(j + 2, map)[0] +
				b3 * GetPoint(j + 3, map)[0] - 3;
			pos.y = (b0 * GetPoint(j, map)[1] +
				b1 * GetPoint(j + 1, map)[1] +
				b2 * GetPoint(j + 2, map)[1] +
				b3 * GetPoint(j + 3, map)[1]) - 8.5; // pos.z = -...
			pos.z = b0 * GetPoint(j, map)[2] +
				b1 * GetPoint(j + 1, map)[2] +
				b2 * GetPoint(j + 2, map)[2] +
				b3 * GetPoint(j + 3, map)[2] - 5.5; // pos.y

			// specify the point
/*			vertexBuffer[j*LOD + i].position = pos;
			vertexBuffer[j*LOD + i].normal = pos;
			vertexBuffer[j*LOD + i].color = color;
		//	SplineV.push_back(pos);//*/

			if(!done){
				key = new AnimationKey();
				if (lastX == 0 && lastY == 0 && lastX == 0){
					dist = 0.0001f;
					slope = 0;
				}
				else{
					dist = pow(pow(lastX - pos.x, 2) + pow(lastY - pos.y, 2) + pow(lastZ - pos.z, 2), 0.5);
					slope = (lastY - pos.y) / pow(pow(lastX - pos.x, 2) + pow(lastZ - pos.z, 2), 0.5);

					if (slope < 0)
						velocity = acceleration * slope;
					else if (slope > 0)
						velocity = acceleration * slope;
					else{
						if (actualSpeed > 10)
							velocity = -0.005;
						else if (actualSpeed < 10)
							velocity = 0.0033f;
					}
				}
				
				actualSpeed += velocity * 0.77; // assume ground resistance = 0.77
				if (actualSpeed < 3)
					actualSpeed = 3;
				else if (actualSpeed > 25)
					actualSpeed = 25;

				totalTime += (dist / actualSpeed);//*/

				if (abs(abs(lastX - pos.x) - abs(lastZ - pos.z)) < 0.01 || lastX == 0 && lastY == 0 && lastX == 0){
					aKeyRo = "";//nothing happen
				}
				else if (abs(lastX) - abs(pos.x) < abs(lastZ) - abs(pos.z)){
					//if (lastX - pos.x < 0)
					hSlope = (lastX - pos.x) / pow(pow(lastZ - pos.z, 2) + pow(lastY - pos.y, 2), 0.5);
					hAngle = acos((lastX - pos.x) / pow(pow(lastX - pos.x, 2) + pow(lastZ - pos.z, 2), 0.5)); //pow( pow( pow(pow(lastX - pos.x, 2) + pow(lastY - pos.y, 2), 0.5), 2) + pow((lastZ - pos.z), 2), 0.5)

					key->SetRotation( vec3(1.0, 0.0, 0.0), hSlope*hAngle);
				}
				else if (abs(lastZ) - abs(pos.z) < abs(lastX) - abs(pos.x)){
					//if (lastZ - pos.z < 0)
					hSlope = (lastZ - pos.z) / pow(pow(lastX - pos.x, 2) + pow(lastY - pos.y, 2), 0.5);
					hAngle = acos((lastZ - pos.z) / pow(pow(lastX - pos.x, 2) + pow(lastZ - pos.z, 2), 0.5)); //pow( pow( pow(pow(lastX - pos.x, 2) + pow(lastY - pos.y, 2), 0.5), 2) + pow((lastZ - pos.z), 2), 0.5)
					
					key->SetRotation( vec3(0.0, 0.0, 1.0), hSlope*hAngle);
				}//*/
				else{
/*					hSlo	pe = (lastZ - pos.z) / pow(pow(lastX - pos.x, 2) + pow(lastY - pos.y, 2), 0.5);
					hAngle = acos((lastZ - pos.z) / pow(pow(lastX - pos.x, 2) + pow(lastZ - pos.z, 2), 0.5)); //pow( pow( pow(pow(lastX - pos.x, 2) + pow(lastY - pos.y, 2), 0.5), 2) + pow((lastZ - pos.z), 2), 0.5)

					key->SetRotation(vec3(0.0, 0.0, 1.0), hSlope*hAngle);//*/
				} 

				string temp = "\"lineK" + to_string((j*LOD + i)) + "\"";
				key->mName = temp.c_str();
				key->SetPosition( pos );
				World::GetInstance()->AddAnimationKey(key);
				ani->AddKey(key, totalTime);

				if ((j*LOD + i)%16 == 0 && pillarF != NULL){
					pModel = "[Pillar]\nname  = \"Cube\"\nscaling  = 0.3 " + to_string(pos.y + 6.4) + " 0.3\nposition = "
						+ to_string(pos.x) + " " + to_string(pos.y-(pos.y)*0.5-3.25) + " " + to_string(pos.z) + "\n";
					const char* temp2 = pModel.c_str();
					fputs(temp2, pillarF);
				}

				lastY = pos.y;
				lastX = pos.x;
				lastZ = pos.z;
			}//*/
		}
	}
	ani->CreateVertexBuffer();
	World::GetInstance()->AddAnimation(ani);

	numOfVertices = sizeof(vertexBuffer) / sizeof(Vertex);
	glGenVertexArrays(1, &mVertexArrayID);
	glGenBuffers(1, &mVertexBufferID);
	glBindBuffer(GL_ARRAY_BUFFER, mVertexBufferID);
	glBufferData(GL_ARRAY_BUFFER, sizeof(vertexBuffer), vertexBuffer, GL_STATIC_DRAW);//*/

	if (!done && sceneF != NULL){
			a += "[Cube]\nname  = \"Cube\"\nscaling = 1.0 1.0 11.0\nposition = 0.0 1.0 0.0\nanimation = \"splineAnime\"";
			const char* temp = a.c_str();
			fputs (	temp,sceneF);

			fclose (sceneF);
		//	delete temp;
			done = true;

		if(pillarF != NULL)
			fclose (pillarF);
	}//*/
/*	else{
		for (i = 0, j = 0; i < sizeof(vertexBuffer) - 1; i += 5, j += 2){
			middle[j].position = Spline1[i];
			middle[j].normal = Spline1[i];
			middle[j].color = color;

		//	pos.x = vertexBuffer[j].position.x;
		//	pos.y = vertexBuffer[j].position.y;
		//	pos.z = vertexBuffer[j].position.z;
			middle[j + 1].position = Spline2[i];
			middle[j + 1].normal = Spline2[i];
			middle[j + 1].color = color;
		}
		numOfVertices = sizeof(middle) / sizeof(Vertex);

		glGenVertexArrays(1, &mVertexArrayID);
		glGenBuffers(1, &mVertexBufferID);
		glBindBuffer(GL_ARRAY_BUFFER, mVertexBufferID);
		glBufferData(GL_ARRAY_BUFFER, sizeof(middle), middle, GL_STATIC_DRAW);
	}//*/

/*	FILE * mapF;
	mapF = fopen ("../Assets/Scenes/map.scene","w+");
	string arrEle;
	if(mapF != NULL){
		for(i=0;i<1392;i+=20){
			arrEle = "{"+to_string(map[i][0])+", "+to_string(map[i][1])+", "+to_string(map[i][2])+"},\n";
			const char* temp = arrEle.c_str();
			fputs(temp, mapF);
		}
		fclose(mapF);
	}//*/
}

BSpline::~BSpline(){
	// Free the GPU from the Vertex Buffer
	glDeleteBuffers(1, &mVertexBufferID);
	glDeleteVertexArrays(1, &mVertexArrayID);

	if (remove("spline.scene") != 0 && remove("pillarM.scene") != 0)
		perror( "Error deleting file" );
	else
		puts( "File successfully deleted" );//*/

}

void BSpline::Draw(){
/*	// Draw the Vertex Buffer
	// Note this draws a unit Cube
	// The Model View Projection transforms are computed in the Vertex Shader
	glBindVertexArray(mVertexArrayID);

	GLuint WorldMatrixLocation = glGetUniformLocation(Renderer::GetShaderProgramID(), "WorldTransform");
	glUniformMatrix4fv(WorldMatrixLocation, 1, GL_FALSE, &GetWorldMatrix()[0][0]);

	// 1st attribute buffer : vertex Positions
	glEnableVertexAttribArray(0);
	glBindBuffer(GL_ARRAY_BUFFER, mVertexBufferID);
	glVertexAttribPointer(0,				// attribute. No particular reason for 0, but must match the layout in the shader.
		3,				// size
		GL_FLOAT,		// type
		GL_FALSE,		// normalized?
		sizeof(Vertex), // stride
		(void*)0        // array buffer offset
		);

	// 2nd attribute buffer : vertex normal
	glEnableVertexAttribArray(1);
	glBindBuffer(GL_ARRAY_BUFFER, mVertexBufferID);
	glVertexAttribPointer(1,
		3,
		GL_FLOAT,
		GL_FALSE,
		sizeof(Vertex),
		(void*)sizeof(vec3)    // Normal is Offseted by vec3 (see class Vertex)
		);

	// 3rd attribute buffer : vertex color
	glEnableVertexAttribArray(2);
	glBindBuffer(GL_ARRAY_BUFFER, mVertexBufferID);
	glVertexAttribPointer(2,
		3,
		GL_FLOAT,
		GL_FALSE,
		sizeof(Vertex),
		(void*)(2 * sizeof(vec3)) // Color is Offseted by 2 vec3 (see class Vertex)
		);

	// Draw the triangles !
//	if(Spline1.size() || Spline2.size())
		glDrawArrays(GL_LINE_STRIP, 0, noOfPoints * LOD - (4*LOD)); // GL_QUAD_STRIP
//	else
//		glDrawArrays(GL_LINES, 0, 920);

	glDisableVertexAttribArray(2);
	glDisableVertexAttribArray(1);
	glDisableVertexAttribArray(0);//*/
}

void BSpline::Update(float dt){ Model::Update(dt); }

bool BSpline::ParseLine(const std::vector<ci_string> &token){
	if (token.empty())
		return true;
	else
		return Model::ParseLine(token);
}